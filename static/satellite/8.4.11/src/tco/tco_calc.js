var calcTco=function calcTco(inputs,number_removed){var _Mathmax=Math.max,software=inputs.software,server=inputs.server,storage=inputs.storage,staff=inputs.staff,infrastructure=inputs.infrastructure,totals=[],software_num_systems=_Mathmax(1,software.num_systems-number_removed);totals.push(software_num_systems*software.avg_cost);var server_num=_Mathmax(1,server.num-number_removed),reduction_multiplier=(100-(server.num-server_num))/100;totals.push(server_num*server.avg_cost+server.avg_software_cost);var storage_cloud_cost=number_removed?(software.num_systems-server_num/16)/software.num_systems*storage.cloud_cost:storage.cloud_cost;totals.push(storage.internal_cost*reduction_multiplier+storage_cloud_cost);var staff_num=_Mathmax(1,staff.num-number_removed);totals.push(staff_num*staff.avg_salary);totals.push(infrastructure.network_cost*reduction_multiplier+infrastructure.security_cost*reduction_multiplier+infrastructure.datacentre_cost*reduction_multiplier+infrastructure.power_cost*reduction_multiplier);var total=totals.reduce(function(sum,sub_total){return sum+sub_total},0);return{id:number_removed,total:total}},calcSaving=function calcSaving(calc,hasSaving,calcs){if(hasSaving){calc.saving=calcs[0].total-calc.total;calc.saving_percentage=1-calc.total/calcs[0].total}else{calc.saving=0;calc.saving_percentage=0}return calc};module.exports={calcTco:calcTco,calcSaving:calcSaving};